<!DOCTYPE html>
<html>
<head>
    <title>Test Multilingual Audio API</title>
</head>
<body>
    <h2>Test Multilingual Audio Generation</h2>
    
    <form id="audioForm">
        <div>
            <label>Question Text:</label><br>
            <input type="text" id="question_text" value="What is Azure?" style="width: 400px;">
        </div><br>
        
        <div>
            <label>Answers (comma-separated):</label><br>
            <input type="text" id="answers" value="A cloud platform,A database,A programming language" style="width: 400px;">
        </div><br>
        
        <div>
            <label>Language Code:</label><br>
            <select id="language_code">
                <option value="en">English (en)</option>
                <option value="es">Spanish (es)</option>
                <option value="fr">French (fr)</option>
                <option value="de">German (de)</option>
                <option value="it">Italian (it)</option>
                <option value="pt">Portuguese (pt)</option>
            </select>
        </div><br>
        
        <button type="button" onclick="testAPI()">Test Multilingual Audio</button>
    </form>
    
    <div id="result" style="margin-top: 20px;"></div>
    
    <script>
        async function testAPI() {
            const questionText = document.getElementById('question_text').value;
            const answers = document.getElementById('answers').value;
            const languageCode = document.getElementById('language_code').value;
            
            const url = `https://backend-ai-practice-questions-app.azurewebsites.net/api/v1/audio/generate/question/multilingual?question_text=${encodeURIComponent(questionText)}&answers=${encodeURIComponent(answers)}&language_code=${languageCode}`;
            
            document.getElementById('result').innerHTML = 'Testing...';
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    document.getElementById('result').innerHTML = `
                        <h3>Success!</h3>
                        <p><strong>Audio URL:</strong> <a href="https://backend-ai-practice-questions-app.azurewebsites.net${data.audio_url}" target="_blank">${data.audio_url}</a></p>
                        <p><strong>Duration:</strong> ${data.duration_seconds} seconds</p>
                        <p><strong>Translated Text:</strong></p>
                        <pre>${data.translated_text}</pre>
                        ${data.audio_url ? `<audio controls><source src="https://backend-ai-practice-questions-app.azurewebsites.net${data.audio_url}" type="audio/mpeg"></audio>` : ''}
                    `;
                } else {
                    document.getElementById('result').innerHTML = `
                        <h3>Error</h3>
                        <p style="color: red;">${JSON.stringify(data, null, 2)}</p>
                    `;
                }
            } catch (error) {
                document.getElementById('result').innerHTML = `
                    <h3>Network Error</h3>
                    <p style="color: red;">${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>